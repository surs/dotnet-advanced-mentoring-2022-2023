¯
™C:\workspace\dotNet mentoring advanced 2022\repo\dotnet-advanced-mentoring-2022-2023\dotNetMentoringAdvanced\dotNetMentoringAdvancedApiGateway\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Configuration		 
.		 
SetBasePath		 !
(		! "
	Directory		" +
.		+ ,
GetCurrentDirectory		, ?
(		? @
)		@ A
)		A B
;		B C
builder

 
.

 
Configuration

 
.

 
AddJsonFile

 !
(

! "
$str

" /
)

/ 0
;

0 1
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddSwaggerForOcelot $
($ %
builder% ,
., -
Configuration- :
,: ;
options< C
=>D F
{ 
options 
. %
GenerateDocsForAggregates %
=& '
true( ,
;, -
} 
) 
; 
builder 
. 
Services 
. 
AddAuthentication "
(" #
)# $
. 
AddJwtBearer 
( 
$str "
," #
options$ +
=>, .
{ 
options 
. 
	Authority 
= 
$str 4
;4 5
options 
. %
TokenValidationParameters )
=* +
new, /%
TokenValidationParameters0 I
{ 	
ValidateAudience 
= 
false $
} 	
;	 

} 
) 
; 
builder 
. 
Services 
. 
	AddOcelot 
( 
) 
. 
AddCacheManager 
( 
x 
=> 
{ 
x 	
.	 
 
WithDictionaryHandle
 
( 
)  
;  !
}   
)   
;   
builder!! 
.!! 
Services!! 
.!! +
AddApplicationInsightsTelemetry!! 0
(!!0 1
options!!1 8
=>!!9 ;
{"" 
options## 
.## 
ConnectionString## 
=## 
builder## &
.##& '
Configuration##' 4
[##4 5
$str##5 \
]##\ ]
;##] ^
}$$ 
)$$ 
;$$ 
var%% 
app%% 
=%% 	
builder%%
 
.%% 
Build%% 
(%% 
)%% 
;%% 
app(( 
.(( !
UseSwaggerForOcelotUI(( 
((( 
options(( !
=>((" $
{)) 
options** 
.** "
PathToSwaggerGenerator** &
=**' (
$str**) 8
;**8 9
}++ 
)++ 
;++ 
app,, 
.,, 
UseHttpsRedirection,, 
(,, 
),, 
;,, 
app-- 
.-- 
	UseOcelot-- 
(-- 
)-- 
.-- 
Wait-- 
(-- 
)-- 
;-- 
app00 
.00 
Run00 
(00 
)00 	
;00	 
